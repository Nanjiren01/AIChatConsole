(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-de7c0744"],{"618b":function(t,e,a){},"757a":function(t,e,a){"use strict";a("618b")},abdc:function(t,e,a){},b6c4:function(t,e,a){"use strict";a("abdc")},c4e0:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("ai-table",{attrs:{"table-actions":t.tableActions,"table-columns":t.tableColumns,"table-data":t.tableData,"table-action-column":t.tableActionColumn,pagination:t.pagination},on:{refresh:t.handleRefresh},scopedSlots:t._u([{key:"topActions",fn:function(){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:""},on:{click:t.handleCreate}},[t._v("新建")])]},proxy:!0},{key:"rowActions",fn:function(e){return[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit"},on:{click:function(a){return a.stopPropagation(),t.handleShowEdit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:1==e.row.state?"danger":"success",plain:"",icon:"el-icon-disabled",disalbed:t.loading},on:{click:function(a){return a.stopPropagation(),t.toggleEnable(e.row)}}},[t._v(" "+t._s(1==e.row.state?"禁用":"启用")+" ")])]}},{key:"state",fn:function(e){return[1==e.row.state?a("el-tag",{attrs:{type:"success"}},[t._v("启用")]):a("el-tag",{attrs:{type:"danger"}},[t._v("停用")])]}},{key:"baseUrl",fn:function(e){return[e.row.baseUrl?a("span",[t._v(t._s(e.row.baseUrl))]):a("i",{staticStyle:{color:"#888"}},[t._v("系统默认（https://api.openai.com）")])]}}])}),a("el-dialog",{attrs:{title:"平台修改",visible:t.dialogVisible,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticStyle:{margin:"0 auto"}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"BASE_URL"}},[a("el-input",{model:{value:t.form.baseUrl,callback:function(e){t.$set(t.form,"baseUrl",e)},expression:"form.baseUrl"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleEditSubmit}},[t._v("确 定")])],1)])],1)},o=[],i=(a("d81d"),a("b0c0"),a("2ca0"),a("d3b7"),a("f4f7")),l=a("b775");function r(t){return Object(l["a"])({url:"/aiPlatforms",method:"get",params:t})}function s(t){return Object(l["a"])({url:"/aiPlatforms",method:"put",data:t})}var c={name:"AiPlatformIndex",components:{AiTable:i["a"]},data:function(){return{tableActions:[],tableColumns:[{label:"#",prop:"id",width:55},{label:"平台名称",prop:"name"},{label:"BASE_URL",slot:"baseUrl"},{label:"模型总数",prop:"modelsCount",width:75},{label:"状态",prop:"state",slot:"state",width:65},{label:"创建时间",prop:"createTime",width:135}],tableActionColumn:{width:175},tableData:[],pagination:{total:0,showDetail:!1},loading:!1,dialogVisible:!1,form:{id:null,name:null,baseUrl:null}}},computed:{},mounted:function(){this.reload()},methods:{reload:function(){var t=this;r().then((function(e){console.log("resp",e);var a=e.data||[];t.tableData=a.map((function(t){return{id:t.id,name:t.name,state:t.state,baseUrl:t.baseUrl,modelsCount:t.modelsCount,createTime:t.createTime}})),t.pagination.total=t.tableData.length}))},handleRefresh:function(){this.reload()},handleCreate:function(){this.$message.warning("开发中……")},handleShowEdit:function(t){this.dialogVisible=!0,this.form.id=t.id,this.form.name=t.name,this.form.state=t.state,this.form.baseUrl=t.baseUrl||""},handleEditSubmit:function(){var t=this;this.form.name?!this.form.baseUrl||this.form.baseUrl.startsWith("http")?(this.loading=!0,s({id:this.form.id,name:this.form.name,state:this.form.state,baseUrl:this.form.baseUrl}).then((function(){t.$message.success("操作成功！"),t.reload(),t.dialogVisible=!1})).finally((function(){t.loading=!1}))):this.$message.error("BASE_URL必须以http开头"):this.$message.error("名称不能为空！")},toggleEnable:function(t){var e=this;this.loading=!0,this.$message.info("处理中……"),s({id:t.id,name:t.name,state:1===t.state?2:1,baseUrl:t.baseUrl}).then((function(){e.$message.success("操作成功！"),e.reload()})).finally((function(){e.loading=!1}))},getStateName:function(t){return{1:"启用",2:"禁用"}[t]||"未知"}}},u=c,d=(a("b6c4"),a("2877")),f=Object(d["a"])(u,n,o,!1,null,"b2420484",null);e["default"]=f.exports},f4f7:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comp-container"},[a("div",{staticClass:"filter-container"},[t._t("filter")],2),a("div",{staticClass:"table-container",staticStyle:{padding:"20px"}},[a("div",{staticClass:"operation-container",staticStyle:{"margin-bottom":"10px","padding-left":"10px"}},[a("el-button",{attrs:{icon:"el-icon-refresh",circle:""},on:{click:t.handleClickRefreshButton}}),t._t("topActions")],2),t._t("header"),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""},on:{"row-click":t.handleRowClick,"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._t("leftColumns"),t._l(t.tableColumns,(function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,width:e.width,type:e.type,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return t._t(e.slot,[t._v(" "+t._s(a.row[e.prop])+" ")],{row:a.row})}}],null,!0)})})),t._t("columns"),t.tableActions?a("el-table-column",{attrs:{label:"操作",width:t.tableActionColumn?t.tableActionColumn.width:0},scopedSlots:t._u([{key:"default",fn:function(e){return t._t("rowActions",null,{row:e.row})}}],null,!0)},t._l(t.tableActions,(function(e){return a("el-button",{key:e.key,attrs:{type:e.type}},[t._v(" "+t._s(e.label)+" ")])})),1):t._e()],2),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":t.pagination.pageNum,"page-sizes":[20,200,500],"page-size":t.pagination.pageSize,layout:t.paginationLayout,total:t.pagination.total||0},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],2)])},o=[],i={name:"AiTable",components:{},props:{tableActions:{type:[Array,Boolean],default:function(){return[]}},tableColumns:{type:Array,default:function(){return[]}},tableActionColumn:{type:Object,default:function(){}},tableData:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){}},loading:{type:Boolean,default:!1}},data:function(){return{currentPage:1}},computed:{paginationLayout:function(){if(!this.pagination)return"";var t=this.pagination.showDetail;return!1===t?"total":"total, sizes, prev, pager, next, jumper"}},created:function(){},methods:{handleSizeChange:function(t){this.$emit("pageSizeChanged",t)},handleCurrentChange:function(t){this.$emit("pageCurrentChanged",t)},handleRowClick:function(t){this.$refs.multipleTable.toggleRowSelection(t)},handleSelectionChange:function(){},handleClickRefreshButton:function(){this.$emit("refresh")}}},l=i,r=(a("757a"),a("2877")),s=Object(r["a"])(l,n,o,!1,null,"61d77082",null);e["a"]=s.exports}}]);