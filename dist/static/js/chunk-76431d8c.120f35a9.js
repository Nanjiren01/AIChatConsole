(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76431d8c"],{"1f06":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"提示",visible:e.passwordDialogVisible,width:"400px","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.handlePasswordDialogClose}},[o("el-form",{ref:"passwordForm",attrs:{"label-width":"80px"}},[e.showOldPassword?o("el-form-item",{attrs:{label:"旧密码"}},[o("el-input",{model:{value:e.passwordDialogInfo.oldPassword,callback:function(t){e.$set(e.passwordDialogInfo,"oldPassword",t)},expression:"passwordDialogInfo.oldPassword"}})],1):e._e(),o("el-form-item",{attrs:{label:"新密码"}},[o("el-input",{model:{value:e.passwordDialogInfo.newPassword,callback:function(t){e.$set(e.passwordDialogInfo,"newPassword",t)},expression:"passwordDialogInfo.newPassword"}})],1),o("el-form-item",{attrs:{label:"确认密码"}},[o("el-input",{model:{value:e.passwordDialogInfo.newPassword2,callback:function(t){e.$set(e.passwordDialogInfo,"newPassword2",t)},expression:"passwordDialogInfo.newPassword2"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.handlePasswordDialogClose}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.handlePasswordChangeSubmit}},[e._v("确定修改")])],1)],1)},n=[],s=o("c24f"),l={name:"PasswordChangeDialog",props:{passwordDialogVisible:{type:Boolean,default:!1},showOldPassword:{type:Boolean,default:!1}},data:function(){return{passwordDialogInfo:{userId:null,oldPassword:"",newPassword:"",newPassword2:""}}},methods:{init:function(e){this.passwordDialogInfo.userId=e,this.passwordDialogInfo.oldPassword="",this.passwordDialogInfo.newPassword="",this.passwordDialogInfo.newPassword2=""},handlePasswordDialogClose:function(){this.$emit("close")},handlePasswordChangeSubmit:function(){var e=this;if(this.showOldPassword){if(!this.passwordDialogInfo.oldPassword)return void this.$message.error("请输入旧密码！");if(this.passwordDialogInfo.oldPassword.length<6||this.passwordDialogInfo.oldPassword.length>64)return void this.$message.error("旧密码长度应该在6-64之间！")}this.passwordDialogInfo.newPassword?this.passwordDialogInfo.newPassword.length<6||this.passwordDialogInfo.newPassword.length>64?this.$message.error("新密码长度应该在6-64之间！"):this.passwordDialogInfo.newPassword2?this.passwordDialogInfo.newPassword===this.passwordDialogInfo.newPassword2?Object(s["a"])(this.passwordDialogInfo.userId,this.passwordDialogInfo.oldPassword,this.passwordDialogInfo.newPassword).then((function(t){console.log("resp",t),e.$message.success("修改密码成功！"),e.$emit("close")})):this.$message.error("两次输入的密码不一致！"):this.$message.error("请输入确认密码！"):this.$message.error("请输入新密码！")}}},i=l,r=o("2877"),d=Object(r["a"])(i,a,n,!1,null,null,null);t["a"]=d.exports},"618b":function(e,t,o){},"757a":function(e,t,o){"use strict";o("618b")},a982:function(e,t,o){"use strict";o("c01e")},c01e:function(e,t,o){},e382:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"page-container"},[o("ai-table",{attrs:{"table-actions":e.tableActions,"table-columns":e.tableColumns,"table-action-column":e.tableActionColumn,"table-data":e.tableData,pagination:e.pagination},on:{refresh:e.handleRefresh},scopedSlots:e._u([{key:"topActions",fn:function(){return[o("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("新增")])]},proxy:!0},{key:"rowActions",fn:function(t){return[o("el-button",{attrs:{icon:"el-icon-set-up"},on:{click:function(o){return o.stopPropagation(),e.handleShowChangePassword(t.row)}}},[e._v("修改密码")])]}},{key:"state",fn:function(t){return[e._v(" "+e._s(e.getStateName(t.row.state))+" ")]}},{key:"role",fn:function(t){return[e._v(" "+e._s(e.getRoleName(t.row.role))+" ")]}}])}),o("change-password",{ref:"password",attrs:{"password-dialog-visible":e.passwordDialogVisible},on:{close:e.handlePasswordDialogClose}}),o("create-user",{ref:"createUser",attrs:{"dialog-visible":e.createUserDialogVisible},on:{close:e.handleCreateUserDialogClose,created:e.handleCreateUserDialogCreated}})],1)},n=[],s=(o("d81d"),o("b0c0"),o("f4f7")),l=o("c24f"),i=o("1f06"),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"创建用户",visible:e.dialogVisible,width:"400px","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.handleDialogClose}},[o("el-form",{ref:"form",attrs:{"label-width":"120px"}},[o("el-form-item",{attrs:{label:"昵称"}},[o("el-input",{model:{value:e.dialogInfo.name,callback:function(t){e.$set(e.dialogInfo,"name",t)},expression:"dialogInfo.name"}})],1),o("el-form-item",{attrs:{label:"用户名(账号)"}},[o("el-input",{model:{value:e.dialogInfo.username,callback:function(t){e.$set(e.dialogInfo,"username",t)},expression:"dialogInfo.username"}})],1),o("el-form-item",{attrs:{label:"密码"}},[o("el-input",{model:{value:e.dialogInfo.password,callback:function(t){e.$set(e.dialogInfo,"password",t)},expression:"dialogInfo.password"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.handleDialogClose}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提 交")])],1)],1)},d=[],c={name:"CreateUser",props:{dialogVisible:{type:Boolean,default:!1}},data:function(){return{dialogInfo:{name:null,username:null,password:null}}},methods:{init:function(){this.dialogInfo.name="",this.dialogInfo.username="",this.dialogInfo.password=""},handleDialogClose:function(){this.$emit("close")},handleSubmit:function(){var e=this;Object(l["b"])(this.dialogInfo.name,this.dialogInfo.username,this.dialogInfo.password).then((function(t){console.log("resp",t),e.$message.success("创建成功！"),e.$emit("created")}))}}},u=c,p=o("2877"),f=Object(p["a"])(u,r,d,!1,null,null,null),h=f.exports,g={name:"UserIndex",components:{AiTable:s["a"],ChangePassword:i["a"],CreateUser:h},data:function(){return{tableActions:[],tableActionColumn:{width:200},tableColumns:[{label:"#",prop:"id",width:55},{label:"昵称",prop:"name"},{label:"登录账号",prop:"username"},{label:"角色",prop:"role",slot:"role"},{label:"状态",prop:"state",slot:"state"},{label:"创建时间",prop:"createTime",width:140},{label:"更新时间",prop:"updateTime",width:140}],tableData:[],pagination:{total:0,showDetail:!1},passwordDialogVisible:!1,createUserDialogVisible:!1}},computed:{},created:function(){},mounted:function(){this.reload()},methods:{reload:function(){var e=this;Object(l["e"])().then((function(t){console.log("resp",t);var o=t.data||[];e.tableData=o.map((function(e){return{id:e.id,username:e.username,name:e.name,role:e.role,state:e.state,createTime:e.createTime,updateTime:e.updateTime}})),e.pagination.total=e.tableData.length}))},handleRefresh:function(){this.reload()},handleCreate:function(){this.createUserDialogVisible=!0,this.$refs.createUser.init()},handleDelete:function(){this.$message.warning("开发中……")},getStateName:function(e){return{1:"正常",2:"禁用"}[e]||"未知"},getRoleName:function(e){return{1:"超级管理员",2:"普通管理员"}[e]||"未知"},handleShowChangePassword:function(e){this.passwordDialogVisible=!0,this.$refs.password.init(e.id)},handlePasswordDialogClose:function(){console.log("handlePasswordDialogClose"),this.passwordDialogVisible=!1},handleCreateUserDialogClose:function(){this.createUserDialogVisible=!1},handleCreateUserDialogCreated:function(){this.handleCreateUserDialogClose(),this.reload()}}},w=g,m=(o("a982"),Object(p["a"])(w,a,n,!1,null,"ea6c466e",null));t["default"]=m.exports},f4f7:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"comp-container"},[o("div",{staticClass:"filter-container"},[e._t("filter")],2),o("div",{staticClass:"table-container",staticStyle:{padding:"20px"}},[o("div",{staticClass:"operation-container",staticStyle:{"margin-bottom":"10px","padding-left":"10px"}},[o("el-button",{attrs:{icon:"el-icon-refresh",circle:""},on:{click:e.handleClickRefreshButton}}),e._t("topActions")],2),e._t("header"),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),e._t("leftColumns"),e._l(e.tableColumns,(function(t){return o("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,type:t.type,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(o){return e._t(t.slot,[e._v(" "+e._s(o.row[t.prop])+" ")],{row:o.row})}}],null,!0)})})),e._t("columns"),e.tableActions?o("el-table-column",{attrs:{label:"操作",width:e.tableActionColumn?e.tableActionColumn.width:0},scopedSlots:e._u([{key:"default",fn:function(t){return e._t("rowActions",null,{row:t.row})}}],null,!0)},e._l(e.tableActions,(function(t){return o("el-button",{key:t.key,attrs:{type:t.type}},[e._v(" "+e._s(t.label)+" ")])})),1):e._e()],2),o("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.pagination.pageNum,"page-sizes":[20,200,500],"page-size":e.pagination.pageSize,layout:e.paginationLayout,total:e.pagination.total||0},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],2)])},n=[],s={name:"AiTable",components:{},props:{tableActions:{type:[Array,Boolean],default:function(){return[]}},tableColumns:{type:Array,default:function(){return[]}},tableActionColumn:{type:Object,default:function(){}},tableData:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){}},loading:{type:Boolean,default:!1}},data:function(){return{currentPage:1}},computed:{paginationLayout:function(){if(!this.pagination)return"";var e=this.pagination.showDetail;return!1===e?"total":"total, sizes, prev, pager, next, jumper"}},created:function(){},methods:{handleSizeChange:function(e){this.$emit("pageSizeChanged",e)},handleCurrentChange:function(e){this.$emit("pageCurrentChanged",e)},handleRowClick:function(e){this.$refs.multipleTable.toggleRowSelection(e)},handleSelectionChange:function(){},handleClickRefreshButton:function(){this.$emit("refresh")}}},l=s,i=(o("757a"),o("2877")),r=Object(i["a"])(l,a,n,!1,null,"61d77082",null);t["a"]=r.exports}}]);